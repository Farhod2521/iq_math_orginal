<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <title>Out.txt yuklash</title>
</head>
<body>
    <h1>Out.txt yuklash formasi</h1>
    <form id="upload-form">
        <label for="topic_id">Topic ID:</label>
        <input type="number" id="topic_id" name="topic_id" required><br><br>

        <label for="level">Level:</label>
        <input type="number" id="level" name="level" required><br><br>

        <label for="file">Out.txt faylini tanlang:</label>
        <input type="file" id="file" name="file" accept=".txt" required><br><br>

        <button type="submit">Yuborish</button>
    </form>

    <script>
        document.getElementById('upload-form').addEventListener('submit', async function(event) {
            event.preventDefault(); // Sahifani reload qilmaslik uchun

            const formData = new FormData();
            formData.append('topic_id', document.getElementById('topic_id').value);
            formData.append('question_type', 'text'); // Doim text turini yuboramiz
            formData.append('level', document.getElementById('level').value);
            formData.append('file', document.getElementById('file').files[0]);

            try {
                const response = await fetch('https://backend.iq-math.uz/api/v1/func_teacher/word-import/', {
                    method: 'POST',
                    body: formData
                });

                if (response.ok) {
                    const result = await response.json();
                    alert('Savollar muvaffaqiyatli yuklandi!');
                    console.log(result);
                } else {
                    const error = await response.json();
                    alert('Xatolik yuz berdi: ' + JSON.stringify(error));
                }
            } catch (error) {
                console.error('Xatolik:', error);
                alert('Serverga ulanishda xatolik.');
            }
        });
    </script>
</body>
</html>
